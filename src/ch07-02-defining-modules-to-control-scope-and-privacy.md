## Scope এবং Privacy নিয়ন্ত্রণ করতে মডিউল সংজ্ঞায়িত করা

এই বিভাগে, আমরা মডিউল এবং মডিউল সিস্টেমের অন্যান্য অংশ নিয়ে আলোচনা করব, যেমন _paths_, যা আপনাকে আইটেমগুলির নাম দিতে দেয়; `use` কীওয়ার্ড যা একটি path কে scope এ নিয়ে আসে; এবং আইটেমগুলিকে public করতে `pub` কীওয়ার্ড। আমরা `as` কীওয়ার্ড, বাহ্যিক প্যাকেজ এবং গ্লোব অপারেটর নিয়েও আলোচনা করব।

### মডিউল চিট শীট

মডিউল এবং paths এর বিশদে যাওয়ার আগে, এখানে আমরা কম্পাইলারে মডিউল, paths, `use` কীওয়ার্ড এবং `pub` কীওয়ার্ড কিভাবে কাজ করে এবং বেশিরভাগ ডেভেলপাররা কিভাবে তাদের কোড সংগঠিত করে সে সম্পর্কে একটি দ্রুত রেফারেন্স প্রদান করি। আমরা এই অধ্যায়ে এই নিয়মগুলির প্রতিটিটির উদাহরণ দেখব, তবে মডিউলগুলি কীভাবে কাজ করে তা মনে রাখার জন্য এটি একটি দুর্দান্ত জায়গা।

- **crate root থেকে শুরু করুন**: একটি crate কম্পাইল করার সময়, কম্পাইলার প্রথমে কম্পাইল করার জন্য কোড খুঁজতে crate root ফাইলে (সাধারণত লাইব্রেরি crate এর জন্য _src/lib.rs_ বা বাইনারি crate এর জন্য _src/main.rs_) দেখে।
- **মডিউল ঘোষণা করা**: crate root ফাইলে, আপনি নতুন মডিউল ঘোষণা করতে পারেন; ধরুন আপনি `mod garden;` দিয়ে একটি "garden" মডিউল ঘোষণা করেছেন। কম্পাইলার নিম্নলিখিত স্থানগুলিতে মডিউলের কোড খুঁজবে:
  - `mod garden` অনুসরণ করে সেমিকোলনের পরিবর্তে কার্লি ব্র্যাকেটের মধ্যে ইনলাইন।
  - _src/garden.rs_ ফাইলে।
  - _src/garden/mod.rs_ ফাইলে।
- **সাবমডিউল ঘোষণা করা**: crate root ছাড়া অন্য যেকোনো ফাইলে, আপনি সাবমডিউল ঘোষণা করতে পারেন। উদাহরণস্বরূপ, আপনি _src/garden.rs_ এ `mod vegetables;` ঘোষণা করতে পারেন। কম্পাইলার প্যারেন্ট মডিউলের জন্য নামযুক্ত ডিরেক্টরির মধ্যে নিম্নলিখিত স্থানগুলিতে সাবমডিউলের কোড খুঁজবে:
  - ইনলাইন, `mod vegetables` অনুসরণ করে সরাসরি, সেমিকোলনের পরিবর্তে কার্লি ব্র্যাকেটের মধ্যে।
  - _src/garden/vegetables.rs_ ফাইলে।
  - _src/garden/vegetables/mod.rs_ ফাইলে।
- **মডিউলে কোডের Path**: একবার একটি মডিউল আপনার crate এর অংশ হয়ে গেলে, আপনি সেই একই crate এর অন্য যেকোনো জায়গা থেকে সেই মডিউলের কোড উল্লেখ করতে পারেন, যতক্ষণ না গোপনীয়তার নিয়মগুলি অনুমতি দেয়, কোডের path ব্যবহার করে। উদাহরণস্বরূপ, garden vegetables মডিউলের একটি `Asparagus` টাইপ `crate::garden::vegetables::Asparagus` এ পাওয়া যাবে।
- **Private বনাম public**: একটি মডিউলের ভিতরের কোড ডিফল্টরূপে তার প্যারেন্ট মডিউল থেকে private থাকে। একটি মডিউলকে public করতে, `mod` এর পরিবর্তে `pub mod` দিয়ে ঘোষণা করুন। একটি public মডিউলের ভিতরের আইটেমগুলিকে public করতে, তাদের ঘোষণার আগে `pub` ব্যবহার করুন।
- **`use` কীওয়ার্ড**: একটি scope এর মধ্যে, `use` কীওয়ার্ড দীর্ঘ paths এর পুনরাবৃত্তি কমাতে আইটেমগুলির শর্টকাট তৈরি করে। যেকোনো scope এ `crate::garden::vegetables::Asparagus` উল্লেখ করতে পারে, আপনি `use crate::garden::vegetables::Asparagus;` দিয়ে একটি শর্টকাট তৈরি করতে পারেন এবং তারপর থেকে সেই scope এ সেই টাইপটি ব্যবহার করার জন্য আপনাকে শুধুমাত্র `Asparagus` লিখতে হবে।

এখানে, আমরা `backyard` নামের একটি বাইনারি crate তৈরি করি যা এই নিয়মগুলি ব্যাখ্যা করে। crate এর ডিরেক্টরি, যার নামও `backyard`, এই ফাইল এবং ডিরেক্টরিগুলি ধারণ করে:

```text
backyard
├── Cargo.lock
├── Cargo.toml
└── src
    ├── garden
    │   └── vegetables.rs
    ├── garden.rs
    └── main.rs
```

এই ক্ষেত্রে crate root ফাইলটি হল _src/main.rs_ এবং এতে রয়েছে:

<Listing file-name="src/main.rs">

```rust,noplayground,ignore
{{#rustdoc_include ../listings/ch07-managing-growing-projects/quick-reference-example/src/main.rs}}
```

</Listing>

`pub mod garden;` লাইনটি কম্পাইলারকে _src/garden.rs_ এ পাওয়া কোড অন্তর্ভুক্ত করতে বলে, যা হল:

<Listing file-name="src/garden.rs">

```rust,noplayground,ignore
{{#rustdoc_include ../listings/ch07-managing-growing-projects/quick-reference-example/src/garden.rs}}
```

</Listing>

এখানে, `pub mod vegetables;` মানে _src/garden/vegetables.rs_ এর কোডটিও অন্তর্ভুক্ত করা হয়েছে। সেই কোডটি হল:

```rust,noplayground,ignore
{{#rustdoc_include ../listings/ch07-managing-growing-projects/quick-reference-example/src/garden/vegetables.rs}}
```

এখন আসুন এই নিয়মগুলির বিশদে যাই এবং বাস্তবে সেগুলি প্রদর্শন করি!

### মডিউলে সম্পর্কিত কোড গ্রুপ করা

_Modules_ আমাদের পাঠযোগ্যতা এবং সহজে পুনরায় ব্যবহারের জন্য একটি crate এর মধ্যে কোড সংগঠিত করতে দেয়। মডিউলগুলি আমাদের আইটেমগুলির _গোপনীয়তা_ নিয়ন্ত্রণ করতেও দেয় কারণ একটি মডিউলের ভিতরের কোড ডিফল্টরূপে private থাকে। Private আইটেমগুলি হল অভ্যন্তরীণ বাস্তবায়নের বিবরণ যা বাইরের ব্যবহারের জন্য উপলব্ধ নয়। আমরা মডিউল এবং তাদের ভিতরের আইটেমগুলিকে public করতে বেছে নিতে পারি, যা সেগুলিকে বহিরাগত কোড ব্যবহার করার এবং তাদের উপর নির্ভর করার অনুমতি দেওয়ার জন্য প্রকাশ করে।

উদাহরণস্বরূপ, আসুন একটি লাইব্রেরি crate লিখি যা একটি রেস্তোরাঁর কার্যকারিতা প্রদান করে। আমরা ফাংশনগুলির সিগনেচারগুলি সংজ্ঞায়িত করব তবে রেস্তোরাঁর বাস্তবায়নের পরিবর্তে কোডের সংগঠনের উপর মনোযোগ দেওয়ার জন্য তাদের বডিগুলি খালি রাখব।

রেস্তোরাঁ শিল্পে, একটি রেস্তোরাঁর কিছু অংশকে _front of house_ এবং অন্যগুলিকে _back of house_ হিসাবে উল্লেখ করা হয়। Front of house হল যেখানে গ্রাহকরা থাকে; এর মধ্যে রয়েছে যেখানে হোস্টরা গ্রাহকদের বসায়, সার্ভাররা অর্ডার নেয় এবং অর্থ নেয় এবং বারটেন্ডাররা পানীয় তৈরি করে। Back of house হল যেখানে শেফ এবং রাঁধুনিরা রান্নাঘরে কাজ করে, ডিশওয়াশাররা পরিষ্কার করে এবং পরিচালকরা প্রশাসনিক কাজ করে।

আমাদের crate টিকে এভাবে গঠন করার জন্য, আমরা এর ফাংশনগুলিকে নেস্টেড মডিউলে সংগঠিত করতে পারি। `cargo new restaurant --lib` চালিয়ে `restaurant` নামের একটি নতুন লাইব্রেরি তৈরি করুন। তারপরে কিছু মডিউল এবং ফাংশন সিগনেচার সংজ্ঞায়িত করতে _src/lib.rs_ এ Listing 7-1 এর কোডটি লিখুন; এই কোডটি হল front of house বিভাগ।

<Listing number="7-1" file-name="src/lib.rs" caption="একটি `front_of_house` মডিউল যাতে অন্যান্য মডিউল রয়েছে এবং তারপর সেই মডিউলগুলিতে ফাংশন রয়েছে">

```rust,noplayground
{{#rustdoc_include ../listings/ch07-managing-growing-projects/listing-07-01/src/lib.rs}}
```

</Listing>

আমরা `mod` কীওয়ার্ড এবং তারপরে মডিউলের নাম (এই ক্ষেত্রে, `front_of_house`) দিয়ে একটি মডিউল সংজ্ঞায়িত করি। তারপরে মডিউলের বডিটি কার্লি ব্র্যাকেটের ভিতরে যায়। মডিউলের ভিতরে, আমরা অন্যান্য মডিউল রাখতে পারি, যেমন `hosting` এবং `serving` মডিউলের ক্ষেত্রে। মডিউলগুলি অন্যান্য আইটেমগুলির সংজ্ঞা ও ধারণ করতে পারে, যেমন structs, enums, ধ্রুবক, traits, এবং - Listing 7-1 এর মতো - ফাংশন।

মডিউলগুলি ব্যবহার করে, আমরা সম্পর্কিত সংজ্ঞাগুলিকে একসাথে গ্রুপ করতে পারি এবং কেন সেগুলি সম্পর্কিত তা উল্লেখ করতে পারি। এই কোড ব্যবহার করা প্রোগ্রামাররা সমস্ত সংজ্ঞা পড়ার পরিবর্তে গ্রুপগুলির উপর ভিত্তি করে কোড নেভিগেট করতে পারে, যা তাদের জন্য প্রাসঙ্গিক সংজ্ঞাগুলি খুঁজে পাওয়া সহজ করে তোলে। এই কোডে নতুন কার্যকারিতা যোগ করা প্রোগ্রামাররা প্রোগ্রামটিকে সুসংগঠিত রাখতে কোডটি কোথায় রাখতে হবে তা জানতে পারবে।

এর আগে, আমরা উল্লেখ করেছি যে _src/main.rs_ এবং _src/lib.rs_ কে crate root বলা হয়। তাদের নামের কারণ হল এই দুটি ফাইলের যে কোনোটির বিষয়বস্তু crate এর মডিউল কাঠামোর মূলে `crate` নামের একটি মডিউল তৈরি করে, যা _মডিউল ট্রি_ নামে পরিচিত।

Listing 7-2, Listing 7-1 এর কাঠামোর জন্য মডিউল ট্রি দেখায়।

<Listing number="7-2" caption="Listing 7-1 এর কোডের জন্য মডিউল ট্রি">

```text
crate
 └── front_of_house
     ├── hosting
     │   ├── add_to_waitlist
     │   └── seat_at_table
     └── serving
         ├── take_order
         ├── serve_order
         └── take_payment
```

</Listing>

এই ট্রি দেখায় যে কিভাবে কিছু মডিউল অন্যান্য মডিউলের ভিতরে নেস্ট করা আছে; উদাহরণস্বরূপ, `hosting` `front_of_house` এর ভিতরে নেস্ট করা আছে। ট্রি আরও দেখায় যে কিছু মডিউল _sibling_, যার মানে তারা একই মডিউলে সংজ্ঞায়িত করা হয়েছে; `hosting` এবং `serving` হল `front_of_house` এর মধ্যে সংজ্ঞায়িত sibling। যদি মডিউল A মডিউল B এর ভিতরে থাকে, তবে আমরা বলি যে মডিউল A হল মডিউল B এর _child_ এবং মডিউল B হল মডিউল A এর _parent_। মনে রাখবেন যে পুরো মডিউল ট্রিটি `crate` নামের অন্তর্নিহিত মডিউলের অধীনে রুটেড করা আছে।

মডিউল ট্রি আপনাকে আপনার কম্পিউটারের ফাইল সিস্টেমের ডিরেক্টরি ট্রিটির কথা মনে করিয়ে দিতে পারে; এটি একটি খুবই উপযুক্ত তুলনা! ফাইল সিস্টেমে ডিরেক্টরির মতো, আপনি আপনার কোড সংগঠিত করতে মডিউল ব্যবহার করেন। এবং একটি ডিরেক্টরিতে ফাইলের মতোই, আমাদের মডিউলগুলি খুঁজে বের করার একটি উপায় দরকার।
